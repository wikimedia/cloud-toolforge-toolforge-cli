_toolforge_build() {
	local cur="${COMP_WORDS[COMP_CWORD]}"
	COMPREPLY=()

	# This isn't strictly necessary here since atm
	# you can't call `toolforge-build` standalone, but
	# it's nice to have here for consistency with where it's needed
	# (for example jobs and webservice) and in case we split the build
	# cli from the current wrapper.
	local cur_index="$COMP_CWORD"
	if [[ "$TOOLFORGE_CLI" == "1" ]]; then
		cur_index=$(($cur_index - 1))
	fi

	case "$cur_index" in
		1)
			if [[ $cur == -* ]]; then
				COMPREPLY=($(compgen -W "--help" -- ${cur}))
			else
				COMPREPLY=($(compgen -W "cancel delete list logs show start" -- ${cur}))
			fi

			;;
		*)
			COMPREPLY=()
			;;
	esac
}

complete -F _toolforge_build toolforge-build
